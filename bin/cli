#!/usr/bin/env node

const fs = require("fs")
const path = require("path")
const { err } = require("../src/functions.js")

let _argv = process.argv.slice(2)
let rootPath = process.cwd()

if (_argv.length) rootPath = path.join(rootPath, _argv[0])
if (fs.existsSync(rootPath) && fs.readdirSync(rootPath).length) {
	err("can't initiate in a non-empty folder")
	return
}

const Command = require("../src/command.js")
const index = require("../src/index.js")

let command = new Command
command.get().then(( answers ) => {
	if (!fs.existsSync(rootPath)) fs.mkdirSync(rootPath, { recursive: true })
	index(answers, rootPath)
})
